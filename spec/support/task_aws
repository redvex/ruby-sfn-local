#!/bin/env ruby
# frozen_string_literal: true

require 'json'

case ARGV[1]
when 'list-state-machines'
  puts '{"sdkResponseMetadata":null,"sdkHttpMetadata":null,"stateMachines":[
          {"stateMachineArn":"arn:aws:states:eu-west-1:123456789012:stateMachine:test","name":"test","type":"STANDARD","creationDate":1651311908088},
          {"stateMachineArn":"arn:aws:states:eu-west-1:123456789012:stateMachine:hello","name":"hello","type":"STANDARD","creationDate":1651311908088},
          {"stateMachineArn":"arn:aws:states:eu-west-1:123456789012:stateMachine:task","name":"task","type":"STANDARD","creationDate":1651311908088}
        ],"nextToken":null}'.gsub('\n', '')
when 'delete-state-machine'
  puts '{"sdkResponseMetadata":null,"sdkHttpMetadata":null}'
when 'create-state-machine'
  puts '{"sdkResponseMetadata":null,"sdkHttpMetadata":null,"stateMachineArn":"arn:aws:states:eu-west-1:123456789012:stateMachine:task","creationDate":1651324030265}'
when 'start-execution'
  puts '{"sdkResponseMetadata":null,"sdkHttpMetadata":null,"executionArn":"arn:aws:states:eu-west-1:123456789012:execution:task:44fdaead-4f55-4587-b19b-f5c93f497955","startDate":1651332908683}'
when 'get-execution-history'
  puts '[
    {"timestamp":1651679504572,"type":"TaskStateEntered","id":2,"previousEventId":0,"activityFailedEventDetails":null,"activityScheduleFailedEventDetails":null,"activityScheduledEventDetails":null,"activityStartedEventDetails":null,"activitySucceededEventDetails":null,"activityTimedOutEventDetails":null,"taskFailedEventDetails":null,"taskScheduledEventDetails":null,"taskStartFailedEventDetails":null,"taskStartedEventDetails":null,"taskSubmitFailedEventDetails":null,"taskSubmittedEventDetails":null,"taskSucceededEventDetails":null,"taskTimedOutEventDetails":null,"executionFailedEventDetails":null,"executionStartedEventDetails":null,"executionSucceededEventDetails":null,"executionAbortedEventDetails":null,"executionTimedOutEventDetails":null,"mapStateStartedEventDetails":null,"mapIterationStartedEventDetails":null,"mapIterationSucceededEventDetails":null,"mapIterationFailedEventDetails":null,"mapIterationAbortedEventDetails":null,"lambdaFunctionFailedEventDetails":null,"lambdaFunctionScheduleFailedEventDetails":null,"lambdaFunctionScheduledEventDetails":null,"lambdaFunctionStartFailedEventDetails":null,"lambdaFunctionSucceededEventDetails":null,"lambdaFunctionTimedOutEventDetails":null,"stateEnteredEventDetails":{"name":"Get Sessions","input":"{\"data_start\":\"2022-01-01\",\"data_end\":\"2022-01-31\",\"school_id\":1}","inputDetails":{"truncated":false}},"stateExitedEventDetails":null},
    {"timestamp":1651679504586,"type":"TaskScheduled","id":3,"previousEventId":2,"activityFailedEventDetails":null,"activityScheduleFailedEventDetails":null,"activityScheduledEventDetails":null,"activityStartedEventDetails":null,"activitySucceededEventDetails":null,"activityTimedOutEventDetails":null,"taskFailedEventDetails":null,"taskScheduledEventDetails":{"resourceType":"apigateway","resource":"invoke","region":"eu-west-1","parameters":"{\"ApiEndpoint\":\"abcde1f2g3.execute-api.eu-west-1.amazonaws.com\",\"Method\":\"GET\",\"Headers\":{\"Content-Type\":[\"application/json\"]},\"Stage\":\"v1\",\"QueryParameters\":{\"data_end\":[\"2022-01-31\"],\"data_start\":[\"2022-01-01\"]},\"Path\":\"/schools/1/sessions/summary\"}","timeoutInSeconds":null,"heartbeatInSeconds":null},"taskStartFailedEventDetails":null,"taskStartedEventDetails":null,"taskSubmitFailedEventDetails":null,"taskSubmittedEventDetails":null,"taskSucceededEventDetails":null,"taskTimedOutEventDetails":null,"executionFailedEventDetails":null,"executionStartedEventDetails":null,"executionSucceededEventDetails":null,"executionAbortedEventDetails":null,"executionTimedOutEventDetails":null,"mapStateStartedEventDetails":null,"mapIterationStartedEventDetails":null,"mapIterationSucceededEventDetails":null,"mapIterationFailedEventDetails":null,"mapIterationAbortedEventDetails":null,"lambdaFunctionFailedEventDetails":null,"lambdaFunctionScheduleFailedEventDetails":null,"lambdaFunctionScheduledEventDetails":null,"lambdaFunctionStartFailedEventDetails":null,"lambdaFunctionSucceededEventDetails":null,"lambdaFunctionTimedOutEventDetails":null,"stateEnteredEventDetails":null,"stateExitedEventDetails":null},
    {"timestamp":1651679504959,"type":"TaskStateExited","id":6,"previousEventId":5,"activityFailedEventDetails":null,"activityScheduleFailedEventDetails":null,"activityScheduledEventDetails":null,"activityStartedEventDetails":null,"activitySucceededEventDetails":null,"activityTimedOutEventDetails":null,"taskFailedEventDetails":null,"taskScheduledEventDetails":null,"taskStartFailedEventDetails":null,"taskStartedEventDetails":null,"taskSubmitFailedEventDetails":null,"taskSubmittedEventDetails":null,"taskSucceededEventDetails":null,"taskTimedOutEventDetails":null,"executionFailedEventDetails":null,"executionStartedEventDetails":null,"executionSucceededEventDetails":null,"executionAbortedEventDetails":null,"executionTimedOutEventDetails":null,"mapStateStartedEventDetails":null,"mapIterationStartedEventDetails":null,"mapIterationSucceededEventDetails":null,"mapIterationFailedEventDetails":null,"mapIterationAbortedEventDetails":null,"lambdaFunctionFailedEventDetails":null,"lambdaFunctionScheduleFailedEventDetails":null,"lambdaFunctionScheduledEventDetails":null,"lambdaFunctionStartFailedEventDetails":null,"lambdaFunctionSucceededEventDetails":null,"lambdaFunctionTimedOutEventDetails":null,"stateEnteredEventDetails":null,"stateExitedEventDetails":{"name":"Get Sessions","output":"{\"data_start\":\"2022-01-01\",\"data_end\":\"2022-01-31\",\"attended\":9,\"cancelled\":1,\"sessions_ids\":[1,2,3,4,5,6,7,8,9,10]}","outputDetails":{"truncated":false}}},
    {"timestamp":1651679504959,"type":"TaskStateEntered","id":7,"previousEventId":6,"activityFailedEventDetails":null,"activityScheduleFailedEventDetails":null,"activityScheduledEventDetails":null,"activityStartedEventDetails":null,"activitySucceededEventDetails":null,"activityTimedOutEventDetails":null,"taskFailedEventDetails":null,"taskScheduledEventDetails":null,"taskStartFailedEventDetails":null,"taskStartedEventDetails":null,"taskSubmitFailedEventDetails":null,"taskSubmittedEventDetails":null,"taskSucceededEventDetails":null,"taskTimedOutEventDetails":null,"executionFailedEventDetails":null,"executionStartedEventDetails":null,"executionSucceededEventDetails":null,"executionAbortedEventDetails":null,"executionTimedOutEventDetails":null,"mapStateStartedEventDetails":null,"mapIterationStartedEventDetails":null,"mapIterationSucceededEventDetails":null,"mapIterationFailedEventDetails":null,"mapIterationAbortedEventDetails":null,"lambdaFunctionFailedEventDetails":null,"lambdaFunctionScheduleFailedEventDetails":null,"lambdaFunctionScheduledEventDetails":null,"lambdaFunctionStartFailedEventDetails":null,"lambdaFunctionSucceededEventDetails":null,"lambdaFunctionTimedOutEventDetails":null,"stateEnteredEventDetails":{"name":"Set Session Status","input":"{\"data_start\":\"2022-01-01\",\"data_end\":\"2022-01-31\",\"attended\":9,\"cancelled\":1,\"sessions_ids\":[1,2,3,4,5,6,7,8,9,10]}","inputDetails":{"truncated":false}},"stateExitedEventDetails":null},
    {"timestamp":1651679504961,"type":"TaskScheduled","id":8,"previousEventId":7,"activityFailedEventDetails":null,"activityScheduleFailedEventDetails":null,"activityScheduledEventDetails":null,"activityStartedEventDetails":null,"activitySucceededEventDetails":null,"activityTimedOutEventDetails":null,"taskFailedEventDetails":null,"taskScheduledEventDetails":{"resourceType":"apigateway","resource":"invoke","region":"eu-west-1","parameters":"{\"ApiEndpoint\":\"abcde1f2g3.execute-api.eu-west-1.amazonaws.com\",\"Method\":\"PUT\",\"Headers\":{\"Content-Type\":[\"application/json\"]},\"Stage\":\"v1\",\"RequestBody\":{\"status\":\"processing\",\"sessions_ids\":[1,2,3,4,5,6,7,8,9,10]},\"Path\":\"/schools/1/sessions/bulk_updates\"}","timeoutInSeconds":null,"heartbeatInSeconds":null},"taskStartFailedEventDetails":null,"taskStartedEventDetails":null,"taskSubmitFailedEventDetails":null,"taskSubmittedEventDetails":null,"taskSucceededEventDetails":null,"taskTimedOutEventDetails":null,"executionFailedEventDetails":null,"executionStartedEventDetails":null,"executionSucceededEventDetails":null,"executionAbortedEventDetails":null,"executionTimedOutEventDetails":null,"mapStateStartedEventDetails":null,"mapIterationStartedEventDetails":null,"mapIterationSucceededEventDetails":null,"mapIterationFailedEventDetails":null,"mapIterationAbortedEventDetails":null,"lambdaFunctionFailedEventDetails":null,"lambdaFunctionScheduleFailedEventDetails":null,"lambdaFunctionScheduledEventDetails":null,"lambdaFunctionStartFailedEventDetails":null,"lambdaFunctionSucceededEventDetails":null,"lambdaFunctionTimedOutEventDetails":null,"stateEnteredEventDetails":null,"stateExitedEventDetails":null},
    {"timestamp":1651679505021,"type":"TaskStateExited","id":11,"previousEventId":10,"activityFailedEventDetails":null,"activityScheduleFailedEventDetails":null,"activityScheduledEventDetails":null,"activityStartedEventDetails":null,"activitySucceededEventDetails":null,"activityTimedOutEventDetails":null,"taskFailedEventDetails":null,"taskScheduledEventDetails":null,"taskStartFailedEventDetails":null,"taskStartedEventDetails":null,"taskSubmitFailedEventDetails":null,"taskSubmittedEventDetails":null,"taskSucceededEventDetails":null,"taskTimedOutEventDetails":null,"executionFailedEventDetails":null,"executionStartedEventDetails":null,"executionSucceededEventDetails":null,"executionAbortedEventDetails":null,"executionTimedOutEventDetails":null,"mapStateStartedEventDetails":null,"mapIterationStartedEventDetails":null,"mapIterationSucceededEventDetails":null,"mapIterationFailedEventDetails":null,"mapIterationAbortedEventDetails":null,"lambdaFunctionFailedEventDetails":null,"lambdaFunctionScheduleFailedEventDetails":null,"lambdaFunctionScheduledEventDetails":null,"lambdaFunctionStartFailedEventDetails":null,"lambdaFunctionSucceededEventDetails":null,"lambdaFunctionTimedOutEventDetails":null,"stateEnteredEventDetails":null,"stateExitedEventDetails":{"name":"Set Session Status","output":"{\"data_start\":\"2022-01-01\",\"data_end\":\"2022-01-31\",\"attended\":9,\"cancelled\":1,\"sessions_ids\":[1,2,3,4,5,6,7,8,9,10]}","outputDetails":{"truncated":false}}},
    {"timestamp":1651679505021,"type":"PassStateEntered","id":12,"previousEventId":11,"activityFailedEventDetails":null,"activityScheduleFailedEventDetails":null,"activityScheduledEventDetails":null,"activityStartedEventDetails":null,"activitySucceededEventDetails":null,"activityTimedOutEventDetails":null,"taskFailedEventDetails":null,"taskScheduledEventDetails":null,"taskStartFailedEventDetails":null,"taskStartedEventDetails":null,"taskSubmitFailedEventDetails":null,"taskSubmittedEventDetails":null,"taskSucceededEventDetails":null,"taskTimedOutEventDetails":null,"executionFailedEventDetails":null,"executionStartedEventDetails":null,"executionSucceededEventDetails":null,"executionAbortedEventDetails":null,"executionTimedOutEventDetails":null,"mapStateStartedEventDetails":null,"mapIterationStartedEventDetails":null,"mapIterationSucceededEventDetails":null,"mapIterationFailedEventDetails":null,"mapIterationAbortedEventDetails":null,"lambdaFunctionFailedEventDetails":null,"lambdaFunctionScheduleFailedEventDetails":null,"lambdaFunctionScheduledEventDetails":null,"lambdaFunctionStartFailedEventDetails":null,"lambdaFunctionSucceededEventDetails":null,"lambdaFunctionTimedOutEventDetails":null,"stateEnteredEventDetails":{"name":"Fake output","input":"{\"data_start\":\"2022-01-01\",\"data_end\":\"2022-01-31\",\"attended\":9,\"cancelled\":1,\"sessions_ids\":[1,2,3,4,5,6,7,8,9,10]}","inputDetails":{"truncated":false}},"stateExitedEventDetails":null},
    {"timestamp":1651679505021,"type":"PassStateExited","id":13,"previousEventId":12,"activityFailedEventDetails":null,"activityScheduleFailedEventDetails":null,"activityScheduledEventDetails":null,"activityStartedEventDetails":null,"activitySucceededEventDetails":null,"activityTimedOutEventDetails":null,"taskFailedEventDetails":null,"taskScheduledEventDetails":null,"taskStartFailedEventDetails":null,"taskStartedEventDetails":null,"taskSubmitFailedEventDetails":null,"taskSubmittedEventDetails":null,"taskSucceededEventDetails":null,"taskTimedOutEventDetails":null,"executionFailedEventDetails":null,"executionStartedEventDetails":null,"executionSucceededEventDetails":null,"executionAbortedEventDetails":null,"executionTimedOutEventDetails":null,"mapStateStartedEventDetails":null,"mapIterationStartedEventDetails":null,"mapIterationSucceededEventDetails":null,"mapIterationFailedEventDetails":null,"mapIterationAbortedEventDetails":null,"lambdaFunctionFailedEventDetails":null,"lambdaFunctionScheduleFailedEventDetails":null,"lambdaFunctionScheduledEventDetails":null,"lambdaFunctionStartFailedEventDetails":null,"lambdaFunctionSucceededEventDetails":null,"lambdaFunctionTimedOutEventDetails":null,"stateEnteredEventDetails":null,"stateExitedEventDetails":{"name":"Fake output","output":"{\"id\":1,\"status\":\"sent\"}","outputDetails":{"truncated":false}}},
    {"timestamp":1651679505024,"type":"ExecutionSucceeded","id":14,"previousEventId":13,"activityFailedEventDetails":null,"activityScheduleFailedEventDetails":null,"activityScheduledEventDetails":null,"activityStartedEventDetails":null,"activitySucceededEventDetails":null,"activityTimedOutEventDetails":null,"taskFailedEventDetails":null,"taskScheduledEventDetails":null,"taskStartFailedEventDetails":null,"taskStartedEventDetails":null,"taskSubmitFailedEventDetails":null,"taskSubmittedEventDetails":null,"taskSucceededEventDetails":null,"taskTimedOutEventDetails":null,"executionFailedEventDetails":null,"executionStartedEventDetails":null,"executionSucceededEventDetails":{"output":"{\"id\":1,\"status\":\"sent\"}","outputDetails":{"truncated":false}},"executionAbortedEventDetails":null,"executionTimedOutEventDetails":null,"mapStateStartedEventDetails":null,"mapIterationStartedEventDetails":null,"mapIterationSucceededEventDetails":null,"mapIterationFailedEventDetails":null,"mapIterationAbortedEventDetails":null,"lambdaFunctionFailedEventDetails":null,"lambdaFunctionScheduleFailedEventDetails":null,"lambdaFunctionScheduledEventDetails":null,"lambdaFunctionStartFailedEventDetails":null,"lambdaFunctionSucceededEventDetails":null,"lambdaFunctionTimedOutEventDetails":null,"stateEnteredEventDetails":null,"stateExitedEventDetails":null}
  ]'.gsub('\n', '')
end
